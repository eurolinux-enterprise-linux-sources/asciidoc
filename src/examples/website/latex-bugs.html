<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.4.5" />
<link rel="stylesheet" href="./xhtml11.css" type="text/css" />
<link rel="stylesheet" href="./xhtml11-quirks.css" type="text/css" />
<link rel="stylesheet" href="./layout1.css" type="text/css" />
<title>Bugs in asciidoc latex backend</title>
</head>
<body>
<div id="layout-banner">
  <div id="layout-title">AsciiDoc</div>
  <div id="layout-description">Text based document generation</div>
</div>
<table>
<tr valign="top">
<td id="layout-menu">
  <div>&#187;<a href="index.html">Home</a></div>
  <div>&#187;<a href="manpage.html">Man&nbsp;Page</a></div>
  <div>&#187;<a href="userguide.html">User&nbsp;Guide</a></div>
  <div>&#187;<a href="INSTALL.html">Installation</a></div>
  <div>&#187;<a href="faq.html">FAQ</a></div>
  <div>&#187;<a href="a2x.1.html">a2x</a></div>
  <div>&#187;<a href="asciidocapi.html">API</a></div>
  <div>&#187;<a href="http://powerman.name/doc/asciidoc">Cheatsheet</a></div>
  <div>&#187;<a href="testasciidoc.html">Tests</a></div>
  <div>&#187;<a href="CHANGELOG.html">ChangeLog</a></div>
  <div>&#187;<a href="support.html">Support</a></div>
  <div id="page-source">&#187;<a href="latex-bugs.txt">Page&nbsp;Source</a></div>
</td>
<td>
<div id="layout-content">
<div id="header">
<h1>Bugs in asciidoc latex backend</h1>
<span id="author">Geoff Eddy</span><br />
<span id="revision">version 8.4.5,</span>
27 May 2009
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Benjamin Klum was unable to maintain the LaTeX backend beyond version
8.2.7, and as a consequence the <tt>latex.conf</tt> file ceased to work with
<tt>asciidoc</tt> sometime after this. For version 8.4.3 I made some changes
to the file to get it working again. This document summarises the
remaining issues which I have found with generating LaTeX and thence
PDF output with <tt>asciidoc</tt>, which is done as follows:</p></div>
<div class="ulist"><ul>
<li>
<p>
<tt>asciidoc --backend=latex --unsafe FILE.txt</tt>
</p>
</li>
<li>
<p>
<tt>latex FILE.tex</tt>
</p>
</li>
<li>
<p>
<tt>kpdf FILE.pdf</tt>
</p>
</li>
</ul></div>
<div class="paragraph"><p>Many of these were found by processing the <tt>asciidoc.txt</tt> file and
comparing the HTML output with the PDF.</p></div>
</div>
</div>
<h2 id="_footnotes">Footnotes</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Priority
</dt>
<dd>
<p>
Low.
</p>
</dd>
<dt class="hdlist1">
Problem
</dt>
<dd>
<p>
References to footnotes, and a sensible value for the
<tt>[footnoteref-inlinemacro]</tt> section, don&#8217;t seem to be possible.
</p>
</dd>
<dt class="hdlist1">
Cause
</dt>
<dd>
<p>
LaTeX doesn&#8217;t support footnoting much beyond creating a
footnote at a certain point in text and displaying the footnote
itself.
</p>
</dd>
<dt class="hdlist1">
Solution
</dt>
<dd>
<p>
Unclear. How important or necessary is this, anyway?
</p>
</dd>
</dl></div>
</div>
<h2 id="_spurious_text_at_starts_of_paragraphs">Spurious text at starts of paragraphs</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Priority
</dt>
<dd>
<p>
Medium
</p>
</dd>
<dt class="hdlist1">
Problem
</dt>
<dd>
<p>
It is necessary to insert spurious text in paragraphs.
</p>
</dd>
<dt class="hdlist1">
Cause
</dt>
<dd>
<p>
This <tt>asciidoc</tt> input:
</p>
<div class="literalblock">
<div class="content">
<pre><tt>-------------------------------------------------------------------
Text
-------------------------------------------------------------------</tt></pre>
</div></div>
<div class="paragraph"><p>generates this LaTeX code:</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>\begin{lstlisting}
SPURIOUS TEXTText\end{lstlisting}</tt></pre>
</div></div>
<div class="paragraph"><p>which should be:</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>\begin{lstlisting}[]
Text\end{lstlisting}</tt></pre>
</div></div>
</dd>
<dt class="hdlist1">
Solution
</dt>
<dd>
<p>
Find out a way to generate the correct LaTeX output as
above. The obvious solution, as explained in <tt>latet.conf</tt>, doesn&#8217;t
work.
</p>
</dd>
</dl></div>
</div>
<h2 id="_tables">Tables</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Priority
</dt>
<dd>
<p>
Rather high.
</p>
</dd>
<dt class="hdlist1">
Problem
</dt>
<dd>
<p>
Not all of the table configuration options can be passed
through to the LaTeX backend. In particular, I&#8217;ve had to assume that
all tables will be fifteen or fewer left-justified columns wide.
</p>
</dd>
<dt class="hdlist1">
Cause
</dt>
<dd>
<p>
The table models in LaTeX and HTML are too dissimilar for one
<tt>asciidoc</tt> specification to generate valid output in both formats by
simple regexp replacement. Related to this is the unfortunate fact
that <tt>&lt;COLGROUP&gt;</tt> and related tags aren&#8217;t a required part of HTML4,
and some broswers (at least Firefox and Konqueror) don&#8217;t implement
them.
</p>
</dd>
<dt class="hdlist1">
Solution
</dt>
<dd>
<p>
Perhaps table processing could be handled by a Python
plugin, which would read in a table spec and generate the appropriate
text?
</p>
</dd>
</dl></div>
</div>
<h2 id="_unicode_escaping">Unicode escaping</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Priority
</dt>
<dd>
<p>
Rather high, to me at least.
</p>
</dd>
<dt class="hdlist1">
Problem
</dt>
<dd>
<p>
The commented-out section in <tt>latex.conf</tt>, if uncommented,
converts <tt>&amp;#960;</tt> to <tt>\unichar{960}</tt>, which then causes LaTeX to
complain that the resulting command is unavailable in encoding T1. The
more common non-ASCII characters, such as those in <tt>félicité</tt> and
<tt>świeca</tt>, are handled properly, but some - such as the IPA characters
in the <tt>tipa</tt> package - are not.
</p>
</dd>
<dt class="hdlist1">
Cause
</dt>
<dd>
<p>
The encodings in the LaTeX output are wrong.
</p>
</dd>
<dt class="hdlist1">
Solution
</dt>
<dd>
<p>
Correct the encodings.
</p>
</dd>
</dl></div>
</div>
<h2 id="_text_colours">Text colours</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Priority
</dt>
<dd>
<p>
Probably low
</p>
</dd>
<dt class="hdlist1">
Problem
</dt>
<dd>
<p>
The text colour options are not processed by LaTeX; for
example <tt>[#ff0000]#Red text#</tt> is not rendered in red.
</p>
</dd>
<dt class="hdlist1">
Cause
</dt>
<dd>
<p>
LaTeX and HTML represent RGB triads differently: HTML is happy
with <tt>#ff8000</tt>, but LaTeX needs <tt>[rgb]{1,0.5,0}</tt>.
</p>
</dd>
<dt class="hdlist1">
Solution
</dt>
<dd>
<p>
Provide some sort of internal RGB conversion mechanism
which can convert RGB triads to different representations.
</p>
</dd>
</dl></div>
</div>
<h2 id="_text_sizes">Text sizes</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Priority
</dt>
<dd>
<p>
Probably low
</p>
</dd>
<dt class="hdlist1">
Problem
</dt>
<dd>
<p>
The text size options are not processed by LaTeX:
<tt>[,,1]#text#</tt> is rendered in the same size as normal text.
</p>
</dd>
<dt class="hdlist1">
Cause
</dt>
<dd>
<p>
HTML size tags - <tt>h1</tt> through <tt>h7</tt> - are directly derivable
from the size number, whereas LaTeX has a series of descriptive words
(<tt>HUGE</tt> through <tt>normalsize</tt> to <tt>scriptsize</tt>).
</p>
</dd>
<dt class="hdlist1">
Solution
</dt>
<dd>
<p>
Provide a way to treat the number as an index into an
array.
</p>
</dd>
</dl></div>
</div>
<h2 id="_background_colour_in_paragraphs">Background colour in paragraphs</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Priority
</dt>
<dd>
<p>
Medium
</p>
</dd>
<dt class="hdlist1">
Problem
</dt>
<dd>
<p>
If the <tt>backgroundcolor</tt> attribute is specified in the
<tt>lstset</tt> command, all paragraphs are displayed as black rectangles by
<tt>kpdf</tt>, <tt>xpdf</tt>, and <tt>evince</tt>, although <tt>kdvi</tt> has no problems. I&#8217;ve
had to remove the attribute, and so paragraphs all appear on white
backgrounds. The PDF viewers also complain:
</p>
<div class="literalblock">
<div class="content">
<pre><tt>Error (NNNN): Unknown operator 'rgb'</tt></pre>
</div></div>
</dd>
<dt class="hdlist1">
Cause
</dt>
<dd>
<p>
Apparently a known bug in the output of <tt>pdflatex</tt>. Not a bug
in <tt>asciidoc</tt>.
</p>
</dd>
<dt class="hdlist1">
Solution
</dt>
<dd>
<p>
Wait until this bug is fixed?
</p>
</dd>
</dl></div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.4.5<br />
Last updated 2009-05-27 09:16:50 NZDT
</div>
<div id="footer-badges">
<a href="http://validator.w3.org/check?uri=referer">
  <img style="border:0;width:88px;height:31px"
    src="http://www.w3.org/Icons/valid-xhtml11-blue"
    alt="Valid XHTML 1.1" height="31" width="88" />
</a>
<a href="http://jigsaw.w3.org/css-validator/">
  <img style="border:0;width:88px;height:31px"
    src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
    alt="Valid CSS!" />
</a>
<a href="http://www.mozilla.org/products/firefox/">
  <img style="border:none; width:110px; height:32px;"
       src="http://www.spreadfirefox.com/community/images/affiliates/Buttons/110x32/safer.gif"
       alt="Get Firefox!" />
</a>
</div>
</div>
</div>
</td>
</tr>
</table>
</body>
</html>
